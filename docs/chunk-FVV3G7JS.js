import{I as B,Ib as U,Jb as S,Kb as be,L as Q,M as de,Z as he,aa as P,fa as fe,ta as C,tb as ge,ua as g,ub as ue}from"./chunk-NKUATUXO.js";import{Ac as ce,B as se,Ba as R,E as x,Ea as me,F as re,Gc as W,Hb as w,Ia as s,Ic as q,Lc as K,Ma as p,Pa as f,Qa as j,Ua as b,_a as z,bb as l,ca as le,cb as r,da as F,db as a,eb as c,fa as ae,hc as _,lb as v,q as M,qb as D,qc as pe,rb as k,rc as H,s as oe,sb as A,xb as T,y as ne,ya as E,yb as J}from"./chunk-ZL7LBTKX.js";import"./chunk-2HP4JIPC.js";var ye=7;var d=(()=>{let e=class e{constructor(t){this.http=t}load(t,o){let n=(t-1)%ye*o;return this.http.get("assets/data/news.json").pipe(M(m=>m.splice(n,o)),re(1500))}};e.\u0275fac=function(o){return new(o||e)(ae(ce))},e.\u0275prov=le({token:e,factory:e.\u0275fac});let i=e;return i})();var N=(()=>{let e=class e{constructor(){this.label="Loading"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=f({type:e,selectors:[["nb-news-post-placeholder"]],hostVars:1,hostBindings:function(o,n){o&2&&z("aria-label",n.label)},standalone:!1,decls:3,vars:0,consts:[[1,"title-placeholder"],[1,"text-placeholder"],[1,"link-placeholder"]],template:function(o,n){o&1&&c(0,"div",0)(1,"div",1)(2,"div",2)},styles:[`[_nghost-%COMP%]{display:block;width:100%}.title-placeholder[_ngcontent-%COMP%]{height:1.8rem;margin-bottom:.5rem;width:80%}.text-placeholder[_ngcontent-%COMP%]{height:4rem;margin-bottom:1rem}.link-placeholder[_ngcontent-%COMP%]{height:1.25rem;width:5rem}[_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:var(--background-basic-color-4)}





`]});let i=e;return i})();var I=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=f({type:e,selectors:[["nb-news-post"]],inputs:{post:"post"},standalone:!1,decls:7,vars:3,consts:[[1,"h5"]],template:function(o,n){o&1&&(r(0,"article")(1,"h2",0),T(2),a(),r(3,"p"),T(4),a(),r(5,"a"),T(6,"Read full article"),a()()),o&2&&(s(2),J(n.post.title),s(2),J(n.post.text),s(),z("href",n.post.link,me))},encapsulation:2});let i=e;return i})();function Le(i,e){i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post-placeholder"),a())}function Oe(i,e){if(i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post",2),a()),i&2){let h=e.$implicit;s(),l("post",h)}}function Me(i,e){i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post-placeholder"),a())}var ve=(()=>{let e=class e{constructor(t,o,n,m,u,L,O){this.newsService=t,this.router=o,this.route=n,this.scrollService=m,this.layoutService=u,this.platformId=L,this.window=O,this.news=[],this.topPlaceholders=[],this.bottomPlaceholders=[],this.pageSize=10,this.loadingNext=!1,this.loadingPrevious=!1,H(this.platformId)&&this.window.history.scrollRestoration&&(this.initialScrollRestoration=O.history.scrollRestoration,history.scrollRestoration="manual")}ngOnInit(){let{page:t}=this.route.snapshot.queryParams;this.startPage=t?Number.parseInt(t,10):100,this.pageToLoadNext=this.startPage}ngOnDestroy(){this.initialScrollRestoration&&(this.window.history.scrollRestoration=this.initialScrollRestoration)}updateUrl(t){this.router.navigate(["."],{queryParams:{page:t},replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge"})}loadPrevious(){this.loadingPrevious||this.startPage===1||(this.loadingPrevious=!0,this.topPlaceholders=new Array(this.pageSize),this.restoreScrollPosition(),this.startPage--,this.newsService.load(this.startPage,this.pageSize).subscribe(t=>{this.topPlaceholders=[],this.news.unshift(...t),this.loadingPrevious=!1},t=>this.startPage++))}loadNext(){this.loadingNext||(this.loadingNext=!0,this.bottomPlaceholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(t=>{this.bottomPlaceholders=[],this.news.push(...t),this.loadingNext=!1,this.pageToLoadNext++}))}restoreScrollPosition(){oe(this.layoutService.getDimensions(),this.scrollService.getPosition(),this.listItems.changes.pipe(x(1)),this.layoutService.getDimensions(),this.scrollService.getPosition()).pipe(se()).subscribe(([t,o,,n,m])=>{let u=t.scrollHeight,L=o.y,O=n.scrollHeight,te=m.y,ie=O-u;if(L+ie===te)return;let Se=te+ie;this.scrollService.scrollTo(null,Se)})}};e.\u0275fac=function(o){return new(o||e)(p(d),p(q),p(W),p(Q),p(de),p(R),p(B))},e.\u0275cmp=f({type:e,selectors:[["ng-component"]],viewQuery:function(o,n){if(o&1&&D(g,5,E),o&2){let m;k(m=A())&&(n.listItems=m)}},standalone:!1,features:[w([d])],decls:5,vars:6,consts:[["nbInfiniteList","","listenWindowScroll","","nbListPageTracker","",3,"topThreshold","bottomThreshold","pageChange","threshold","pageSize","startPage"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(o,n){o&1&&(r(0,"nb-card")(1,"nb-list",0),v("topThreshold",function(){return n.loadPrevious()})("bottomThreshold",function(){return n.loadNext()})("pageChange",function(u){return n.updateUrl(u)}),b(2,Le,2,0,"nb-list-item",1)(3,Oe,2,1,"nb-list-item",1)(4,Me,2,0,"nb-list-item",1),a()()),o&2&&(s(),l("threshold",500)("pageSize",n.pageSize)("startPage",n.startPage),s(),l("ngForOf",n.topPlaceholders),s(),l("ngForOf",n.news),s(),l("ngForOf",n.bottomPlaceholders))},dependencies:[_,C,g,U,S,P,N,I],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}"]});let i=e;return i})();function xe(i,e){if(i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post",4),a()),i&2){let h=e.$implicit;s(),l("post",h)}}function Fe(i,e){i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post-placeholder"),a())}function Ee(i,e){if(i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post",4),a()),i&2){let h=e.$implicit;s(),l("post",h)}}function Re(i,e){i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post-placeholder"),a())}var we=(()=>{let e=class e{constructor(t){this.newsService=t,this.firstCard={news:[],placeholders:[],loading:!1,pageToLoadNext:1},this.secondCard={news:[],placeholders:[],loading:!1,pageToLoadNext:1},this.pageSize=10}loadNext(t){t.loading||(t.loading=!0,t.placeholders=new Array(this.pageSize),this.newsService.load(t.pageToLoadNext,this.pageSize).subscribe(o=>{t.placeholders=[],t.news.push(...o),t.loading=!1,t.pageToLoadNext++}))}};e.\u0275fac=function(o){return new(o||e)(p(d))},e.\u0275cmp=f({type:e,selectors:[["ng-component"]],standalone:!1,features:[w([d])],decls:12,vars:6,consts:[[1,"own-scroll"],["nbInfiniteList","",3,"bottomThreshold","threshold"],[4,"ngFor","ngForOf"],["nbInfiniteList","","listenWindowScroll","",3,"bottomThreshold","threshold"],[3,"post"]],template:function(o,n){o&1&&(r(0,"nb-card",0)(1,"nb-card-header"),T(2," Own scroll "),a(),r(3,"nb-list",1),v("bottomThreshold",function(){return n.loadNext(n.firstCard)}),b(4,xe,2,1,"nb-list-item",2)(5,Fe,2,0,"nb-list-item",2),a()(),r(6,"nb-card")(7,"nb-card-header"),T(8," Window scroll "),a(),r(9,"nb-list",3),v("bottomThreshold",function(){return n.loadNext(n.secondCard)}),b(10,Ee,2,1,"nb-list-item",2)(11,Re,2,0,"nb-list-item",2),a()()),o&2&&(s(3),l("threshold",500),s(),l("ngForOf",n.firstCard.news),s(),l("ngForOf",n.firstCard.placeholders),s(4),l("threshold",500),s(),l("ngForOf",n.secondCard.news),s(),l("ngForOf",n.secondCard.placeholders))},dependencies:[_,C,g,S,P,he,N,I],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}","[_nghost-%COMP%]{display:flex}nb-card[_ngcontent-%COMP%]{flex:1 1 45%;margin:0 2.5%}nb-card.own-scroll[_ngcontent-%COMP%]{height:30rem}"]});let i=e;return i})();function je(i,e){if(i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post",2),a()),i&2){let h=e.$implicit;s(),l("post",h)}}function ze(i,e){i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post-placeholder"),a())}var _e=(()=>{let e=class e{constructor(t){this.newsService=t,this.news=[],this.placeholders=[],this.pageSize=10,this.pageToLoadNext=1,this.loading=!1}loadNext(){this.loading||(this.loading=!0,this.placeholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(t=>{this.placeholders=[],this.news.push(...t),this.loading=!1,this.pageToLoadNext++}))}};e.\u0275fac=function(o){return new(o||e)(p(d))},e.\u0275cmp=f({type:e,selectors:[["ng-component"]],standalone:!1,features:[w([d])],decls:4,vars:3,consts:[["nbInfiniteList","","listenWindowScroll","",3,"bottomThreshold","threshold"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(o,n){o&1&&(r(0,"nb-card")(1,"nb-list",0),v("bottomThreshold",function(){return n.loadNext()}),b(2,je,2,1,"nb-list-item",1)(3,ze,2,0,"nb-list-item",1),a()()),o&2&&(s(),l("threshold",500),s(),l("ngForOf",n.news),s(),l("ngForOf",n.placeholders))},dependencies:[_,C,g,S,P,N,I],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}"]});let i=e;return i})();function De(i,e){if(i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post",3),a()),i&2){let h=e.$implicit;s(),l("post",h)}}function ke(i,e){i&1&&(r(0,"nb-list-item"),c(1,"nb-news-post-placeholder"),a())}var Pe=(()=>{let e=class e{constructor(t,o,n,m,u,L){this.newsService=t,this.router=o,this.route=n,this.scrollService=m,this.platformId=u,this.window=L,this.news=[],this.placeholders=[],this.pageSize=10,this.loadingNext=!1,this.loadingPrevious=!1,H(this.platformId)&&this.window.history.scrollRestoration&&(this.initialScrollRestoration=L.history.scrollRestoration,history.scrollRestoration="manual")}ngOnInit(){let{page:t}=this.route.snapshot.queryParams;this.startPage=t?Number.parseInt(t,10):1,this.pageToLoadNext=this.startPage}ngOnDestroy(){this.initialScrollRestoration&&(this.window.history.scrollRestoration=this.initialScrollRestoration)}updateUrl(t){this.router.navigate(["."],{queryParams:{page:t},replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge"})}loadPrevious(){this.loadingPrevious||this.startPage===1||(this.loadingPrevious=!0,this.newsService.load(this.startPage-1,this.pageSize).subscribe(t=>{this.news.unshift(...t),this.loadingPrevious=!1,this.restoreScrollPosition(),this.startPage--}))}loadNext(){this.loadingNext||(this.loadingNext=!0,this.placeholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(t=>{this.placeholders=[],this.news.push(...t),this.loadingNext=!1,this.pageToLoadNext++}))}restoreScrollPosition(){let t=this.listItems.length>0?this.listItems.first.nativeElement:null;this.listItems.changes.pipe(M(()=>this.listItems.first.nativeElement),ne(o=>o!==t),x(1)).subscribe(()=>{let o=0;for(let{nativeElement:n}of this.listItems.toArray()){if(n===t)break;o+=Ae(this.window,n)}this.scrollService.scrollTo(null,o)})}};e.\u0275fac=function(o){return new(o||e)(p(d),p(q),p(W),p(Q),p(R),p(B))},e.\u0275cmp=f({type:e,selectors:[["ng-component"]],viewQuery:function(o,n){if(o&1&&D(g,5,E),o&2){let m;k(m=A())&&(n.listItems=m)}},standalone:!1,features:[w([d])],decls:5,vars:6,consts:[[3,"nbSpinner"],["nbInfiniteList","","listenWindowScroll","","nbListPageTracker","",3,"topThreshold","bottomThreshold","pageChange","threshold","pageSize","startPage"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(o,n){o&1&&(r(0,"nb-card"),c(1,"div",0),r(2,"nb-list",1),v("topThreshold",function(){return n.loadPrevious()})("bottomThreshold",function(){return n.loadNext()})("pageChange",function(u){return n.updateUrl(u)}),b(3,De,2,1,"nb-list-item",2)(4,ke,2,0,"nb-list-item",2),a()()),o&2&&(s(),l("nbSpinner",n.loadingPrevious),s(),l("threshold",500)("pageSize",n.pageSize)("startPage",n.startPage),s(),l("ngForOf",n.news),s(),l("ngForOf",n.placeholders))},dependencies:[_,C,g,U,S,P,ge,N,I],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{flex:1 0 4rem}"]});let i=e;return i})();function Ae(i,e){let h=i.getComputedStyle(e),t=parseInt(h.getPropertyValue("margin-top"),10),o=parseInt(h.getPropertyValue("margin-bottom"),10);return e.offsetHeight+t+o}var He=[{path:"infinite-list-placeholders.component",component:ve},{path:"infinite-list-scroll-modes.component",component:we},{path:"infinite-list-showcase.component",component:_e},{path:"infinite-news-list.component",component:Pe}],Ce=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=j({type:e}),e.\u0275inj=F({imports:[K.forChild(He),K]});let i=e;return i})();var Rt=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=j({type:e}),e.\u0275inj=F({imports:[pe,be,fe,ue,Ce]});let i=e;return i})();export{Rt as InfiniteListModule};
