"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5951],{65951:(G,p,s)=>{s.r(p),s.d(p,{AzurePlaygroundModule:()=>V});var h=s(60177),T=s(89417),A=s(21626),C=s(37159),$=s(17229),F=s(73688),i=s(7673),I=s(25558),u=s(96354),j=s(99437),g=s(61106),E=s(19653),m=s(89169),a=s(93609),t=s(54438);let O=(()=>{class e extends g.wu{static{this.NAME="nb:auth:azure:token"}getValue(){return this.token.id_token}}return e})(),y=(()=>{class e extends E.x{constructor(){super(...arguments),this.redirectResultHandlers={[m.fr.CODE]:()=>(0,i.of)(this.route.snapshot.queryParams).pipe((0,I.n)(n=>n.code?this.requestToken(n.code):(0,i.of)(new a.q(!1,n,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),id_token:()=>{const r=this.getOption("authorize.requireValidToken");return(0,i.of)(this.route.snapshot.fragment).pipe((0,u.T)(o=>this.parseHashAsQueryParams(o)),(0,u.T)(o=>o.error?new a.q(!1,o,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new a.q(!0,o,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(o,r))),(0,j.W)(o=>{const f=[];return f.push(o instanceof g.wO?o.message:"Something went wrong."),(0,i.of)(new a.q(!1,o,this.getOption("redirect.failure"),f))}))}},this.redirectResults={[m.fr.CODE]:()=>(0,i.of)(null),id_token:()=>(0,i.of)(this.route.snapshot.fragment).pipe((0,u.T)(n=>this.parseHashAsQueryParams(n)),(0,u.T)(n=>!(!n||!n.id_token&&!n.error)))}}static setup(n){return[e,n]}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})()}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac})}}return e})();var d=s(54614),c=s(56977),v=s(21413),b=s(22170),l=s(16248);let S=(()=>{class e{constructor(n,r){this.authService=n,this.router=r,this.destroy$=new v.B,this.authService.authenticate("azure").pipe((0,c.Q)(this.destroy$)).subscribe(o=>{o.isSuccess()&&o.getRedirect()&&this.router.navigateByUrl(o.getRedirect())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(r){return new(r||e)(t.rXU(b.U),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["nb-playground-azure-callback"]],standalone:!1,decls:3,vars:0,template:function(r,o){1&r&&(t.j41(0,"nb-layout")(1,"nb-layout-column"),t.EFF(2,"Authenticating..."),t.k0s()())},dependencies:[l.EA,l.U9],encapsulation:2})}}return e})();var z=s(84072);function U(e,k){if(1&e){const n=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.login())}),t.EFF(1,"Sign In with Azure"),t.k0s()}}function R(e,k){if(1&e){const n=t.RV6();t.j41(0,"button",3),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.logout())}),t.EFF(1,"Sign Out"),t.k0s()}}const B=[{path:"",component:(()=>{class e{constructor(n){this.authService=n,this.destroy$=new v.B,this.authService.onTokenChange().pipe((0,c.Q)(this.destroy$)).subscribe(r=>{this.token=null,r&&r.isValid()&&(this.token=r)})}login(){this.authService.authenticate("azure").pipe((0,c.Q)(this.destroy$)).subscribe(n=>{})}logout(){this.authService.logout("azure").pipe((0,c.Q)(this.destroy$)).subscribe(n=>{})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(r){return new(r||e)(t.rXU(b.U))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["nb-playground-azure"]],standalone:!1,decls:11,vars:6,consts:[["nbButton","","status","success",3,"click",4,"ngIf"],["nbButton","","status","warning",3,"click",4,"ngIf"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning",3,"click"]],template:function(r,o){1&r&&(t.j41(0,"nb-layout")(1,"nb-layout-column")(2,"nb-card")(3,"nb-card-body")(4,"p"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.nI1(8,"json"),t.k0s(),t.DNE(9,U,2,0,"button",0)(10,R,2,0,"button",1),t.k0s()()()()),2&r&&(t.R7$(5),t.SpI("Current User Authenticated: ",!!o.token,""),t.R7$(2),t.SpI("Current User Token: ",t.bMT(8,4,o.token),""),t.R7$(2),t.Y8G("ngIf",!o.token),t.R7$(),t.Y8G("ngIf",o.token))},dependencies:[h.bT,z.Sr,z.KH,l.EA,l.U9,h.TG],encapsulation:2})}}return e})()},{path:"callback",component:S}];let x=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(B),d.iI]})}}return e})(),V=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({providers:[y],imports:[h.MD,T.YN,A.q1,F.bI.forRoot({strategies:[y.setup({name:"azure",clientId:"bde728e2-2809-4ff1-bc9c-7fcb23800ebe",clientSecret:"",authorize:{endpoint:"https://login.microsoftonline.com/01513fd2-16a0-453b-9fa0-c9089bfa023e/oauth2/authorize",responseType:"id_token",scope:"openid",redirectUri:"https://akveo.github.io/nebular/example/azure/callback",params:{p:"b2c_1_nebular"}},token:{class:O},redirect:{success:"/example/azure"}})]}),C.l,$.l,x]})}}return e})()}}]);