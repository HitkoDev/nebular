"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1307],{73688:(A,k,e)=>{e.d(k,{bI:()=>K});var u=e(54438),d=e(60177),h=e(54614),g=e(89417),_=e(17229),f=e(37159),T=e(5549),n=e(92941),c=e(30549),r=e(52003),a=e(8493),O=e(22170),p=e(61106),l=e(18526),m=e(19291),t=e(45705),o=e(18731),i=e(19653),s=e(45254),E=e(40696),y=e(60061);function D(R,w){const M=[];return R.strategies.forEach(([v,U])=>{const C=w.get(v);C.setOptions(U),M.push(C)}),M}function P(R){const w=[];return R.forEach(M=>{w.push(M.getOption("token.class"))}),w}function S(R){return(0,y.zw)(E.qn,R)}function I(R){return!0}let K=(()=>{class R{static forRoot(M){return{ngModule:R,providers:[{provide:E.Fx,useValue:M},{provide:E.$$,useFactory:S,deps:[E.Fx]},{provide:E.Yn,useFactory:D,deps:[E.$$,u.zZn]},{provide:E.DY,useFactory:P,deps:[E.Yn]},{provide:t.B,useValue:p.ON},{provide:E.o1,useValue:"Authorization"},{provide:E.Tp,useValue:I},{provide:l.J,useClass:l.k},t.E,O.U,m.d,o.W,s.Z,i.x]}}static{this.\u0275fac=function(v){return new(v||R)}}static{this.\u0275mod=u.$C({type:R})}static{this.\u0275inj=u.G2t({imports:[d.MD,_.l,f.l,T.A,n.d,c.p,r.P,h.iI,g.YN,a.c]})}}return R})()},40696:(A,k,e)=>{e.d(k,{$$:()=>g,DY:()=>T,Fx:()=>_,Tp:()=>c,Yn:()=>f,o1:()=>n,qn:()=>h});var u=e(54438);const d=[],h={strategies:[],forms:{login:{redirectDelay:500,strategy:"email",rememberMe:!0,showMessages:{success:!0,error:!0},socialLinks:d},register:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},terms:!0,socialLinks:d},requestPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:d},resetPassword:{redirectDelay:500,strategy:"email",showMessages:{success:!0,error:!0},socialLinks:d},logout:{redirectDelay:500,strategy:"email"},validation:{password:{required:!0,minLength:4,maxLength:50},email:{required:!0},fullName:{required:!1,minLength:4,maxLength:50}}}},g=new u.nKC("Nebular Auth Options"),_=new u.nKC("Nebular User Auth Options"),f=new u.nKC("Nebular Auth Strategies"),T=new u.nKC("Nebular Auth Tokens"),n=new u.nKC("Nebular Simple Interceptor Header"),c=new u.nKC("Nebular Interceptor Filter")},60061:(A,k,e)=>{e.d(k,{RL:()=>f,mf:()=>_,zw:()=>u});const u=function(...c){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];const r=arguments[0];let O,p;return Array.prototype.slice.call(arguments,1).forEach(function(l){"object"!=typeof l||Array.isArray(l)||Object.keys(l).forEach(function(m){if(p=r[m],O=l[m],O!==r)return"object"!=typeof O||null===O?void(r[m]=O):Array.isArray(O)?void(r[m]=g(O)):d(O)?void(r[m]=h(O)):"object"!=typeof p||null===p||Array.isArray(p)?void(r[m]=u({},O)):void(r[m]=u(p,O))})}),r};function d(c){return c instanceof Date||c instanceof RegExp}function h(c){if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return new RegExp(c);throw new Error("cloneSpecificValue: Unexpected situation")}function g(c){const r=[];return c.forEach(function(a,O){r[O]="object"==typeof a&&null!==a?Array.isArray(a)?g(a):d(a)?h(a):u({},a):a}),r}function _(c={},r,a){const O=r.split(".");let p=u({},c||{});return O.forEach(l=>{p=p&&typeof p[l]<"u"?p[l]:void 0}),typeof p>"u"?a:p}function f(c){let r=c.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("Illegal base64url string!")}return function n(c){return decodeURIComponent(Array.prototype.map.call(function T(c){let a="";if((c=String(c).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let p,l,O=0,m=0;l=c.charAt(m++);~l&&(p=O%4?64*p+l:l,O++%4)?a+=String.fromCharCode(255&p>>(-2*O&6)):0)l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(l);return a}(c),r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join(""))}(r)}},93609:(A,k,e)=>{e.d(k,{q:()=>u});class u{constructor(h,g,_,f,T,n=null){this.success=h,this.response=g,this.redirect=_,this.errors=[],this.messages=[],this.errors=this.errors.concat([f]),f instanceof Array&&(this.errors=f),this.messages=this.messages.concat([T]),T instanceof Array&&(this.messages=T),this.token=n}getResponse(){return this.response}getToken(){return this.token}getRedirect(){return this.redirect}getErrors(){return this.errors.filter(h=>!!h)}getMessages(){return this.messages.filter(h=>!!h)}isSuccess(){return this.success}isFailure(){return!this.success}}},22170:(A,k,e)=>{e.d(k,{U:()=>T});var u=e(7673),d=e(96354),h=e(25558),g=e(40696),_=e(54438),f=e(19291);let T=(()=>{class n{constructor(r,a){this.tokenService=r,this.strategies=a}getToken(){return this.tokenService.get()}isAuthenticated(){return this.getToken().pipe((0,d.T)(r=>r.isValid()))}isAuthenticatedOrRefresh(){return this.getToken().pipe((0,h.n)(r=>r.getValue()&&!r.isValid()?this.refreshToken(r.getOwnerStrategyName(),r).pipe((0,h.n)(a=>a.isSuccess()?this.isAuthenticated():(0,u.of)(!1))):(0,u.of)(r.isValid())))}onTokenChange(){return this.tokenService.tokenChange()}onAuthenticationChange(){return this.onTokenChange().pipe((0,d.T)(r=>r.isValid()))}authenticate(r,a){return this.getStrategy(r).authenticate(a).pipe((0,h.n)(O=>this.processResultToken(O)))}register(r,a){return this.getStrategy(r).register(a).pipe((0,h.n)(O=>this.processResultToken(O)))}logout(r){return this.getStrategy(r).logout().pipe((0,h.n)(a=>(a.isSuccess()&&this.tokenService.clear().pipe((0,d.T)(()=>a)),(0,u.of)(a))))}requestPassword(r,a){return this.getStrategy(r).requestPassword(a)}resetPassword(r,a){return this.getStrategy(r).resetPassword(a)}refreshToken(r,a){return this.getStrategy(r).refreshToken(a).pipe((0,h.n)(O=>this.processResultToken(O)))}getStrategy(r){const a=this.strategies.find(O=>O.getName()===r);if(!a)throw new TypeError(`There is no Auth Strategy registered under '${r}' name`);return a}processResultToken(r){return r.isSuccess()&&r.getToken()?this.tokenService.set(r.getToken()).pipe((0,d.T)(a=>r)):(0,u.of)(r)}static{this.\u0275fac=function(a){return new(a||n)(_.KVO(f.d),_.KVO(g.Yn))}}static{this.\u0275prov=_.jDH({token:n,factory:n.\u0275fac})}}return n})()},45705:(A,k,e)=>{e.d(k,{B:()=>g,E:()=>_});var u=e(54438),d=e(61106),h=e(40696);const g=new u.nKC("Nebular Auth Options");let _=(()=>{class f{constructor(n,c){this.fallbackClass=n,this.tokenClasses=c}wrap(n){return JSON.stringify({name:n.getName(),ownerStrategyName:n.getOwnerStrategyName(),createdAt:n.getCreatedAt().getTime(),value:n.toString()})}unwrap(n){let c=this.fallbackClass,r="",a="",O=null;const p=this.parseTokenPack(n);return p&&(c=this.getClassByName(p.name)||this.fallbackClass,r=p.value,a=p.ownerStrategyName,O=new Date(Number(p.createdAt))),(0,d.SU)(c,r,a,O)}getClassByName(n){return this.tokenClasses.find(c=>c.NAME===n)}parseTokenPack(n){try{return JSON.parse(n)}catch{}return null}static{this.\u0275fac=function(c){return new(c||f)(u.KVO(g),u.KVO(h.DY))}}static{this.\u0275prov=u.jDH({token:f,factory:f.\u0275fac})}}return f})()},18526:(A,k,e)=>{e.d(k,{J:()=>h,k:()=>g});var u=e(54438),d=e(45705);class h{}let g=(()=>{class _ extends h{constructor(T){super(),this.parceler=T,this.key="auth_app_token"}get(){const T=localStorage.getItem(this.key);return this.parceler.unwrap(T)}set(T){const n=this.parceler.wrap(T);localStorage.setItem(this.key,n)}clear(){localStorage.removeItem(this.key)}static{this.\u0275fac=function(n){return new(n||_)(u.KVO(d.E))}}static{this.\u0275prov=u.jDH({token:_,factory:_.\u0275fac})}}return _})()},19291:(A,k,e)=>{e.d(k,{d:()=>T});var u=e(84412),d=e(7673),h=e(5964),g=e(97647),_=e(54438),f=e(18526);let T=(()=>{class n{constructor(r){this.tokenStorage=r,this.token$=new u.t(null),this.publishStoredToken()}tokenChange(){return this.token$.pipe((0,h.p)(r=>!!r),(0,g.u)())}set(r){return this.tokenStorage.set(r),this.publishStoredToken(),(0,d.of)(null)}get(){const r=this.tokenStorage.get();return(0,d.of)(r)}clear(){return this.tokenStorage.clear(),this.publishStoredToken(),(0,d.of)(null)}publishStoredToken(){this.token$.next(this.tokenStorage.get())}static{this.\u0275fac=function(a){return new(a||n)(_.KVO(f.J))}}static{this.\u0275prov=_.jDH({token:n,factory:n.\u0275fac})}}return n})()},61106:(A,k,e)=>{e.d(k,{HL:()=>O,ON:()=>c,SU:()=>T,ts:()=>r,wO:()=>g,wu:()=>p});var u=e(60061);class d{constructor(){this.payload=null}getName(){return this.constructor.NAME}getPayload(){return this.payload}}class h extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class _ extends g{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}class f extends g{constructor(m){super(m),Object.setPrototypeOf(this,new.target.prototype)}}function T(l,m,t,o){return new l(m,t,o)}function n(l){if(0===l.length)throw new _("Cannot extract from an empty payload.");const m=l.split(".");if(3!==m.length)throw new f(`The payload ${l} is not valid JWT payload and must consist of three parts.`);let t;try{t=(0,u.RL)(m[1])}catch{throw new f(`The payload ${l} is not valid JWT payload and cannot be parsed.`)}if(!t)throw new f(`The payload ${l} is not valid JWT payload and cannot be decoded.`);return JSON.parse(t)}let c=(()=>{class l extends d{static{this.NAME="nb:auth:simple:token"}constructor(t,o,i){super(),this.token=t,this.ownerStrategyName=o,this.createdAt=i;try{this.parsePayload()}catch(s){if(!(s instanceof h))throw s}this.createdAt=this.prepareCreatedAt(i)}parsePayload(){this.payload=null}prepareCreatedAt(t){return t||new Date}getCreatedAt(){return this.createdAt}getValue(){return this.token}getOwnerStrategyName(){return this.ownerStrategyName}isValid(){return!!this.getValue()}toString(){return this.token?this.token:""}}return l})(),r=(()=>{class l extends c{static{this.NAME="nb:auth:jwt:token"}prepareCreatedAt(t){const o=this.getPayload();return o&&o.iat?new Date(1e3*Number(o.iat)):super.prepareCreatedAt(t)}parsePayload(){if(!this.token)throw new h("Token not found. ");this.payload=n(this.token)}getTokenExpDate(){const t=this.getPayload();if(t&&!t.hasOwnProperty("exp"))return null;const o=new Date(0);return o.setUTCSeconds(t.exp),o}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}}return l})(),O=(()=>{class l extends c{static{this.NAME="nb:auth:oauth2:token"}constructor(t={},o,i){super((l=>{if("string"==typeof l)try{return JSON.parse(l)}catch{}return l})(t),o,i)}getValue(){return this.token.access_token}getRefreshToken(){return this.token.refresh_token}setRefreshToken(t){this.token.refresh_token=t}parsePayload(){if(!this.token)throw new h("Token not found.");if(!Object.keys(this.token).length)throw new _("Cannot extract payload from an empty token.");this.payload=this.token}getType(){return this.token.token_type}isValid(){return super.isValid()&&(!this.getTokenExpDate()||new Date<this.getTokenExpDate())}getTokenExpDate(){return this.token.hasOwnProperty("expires_in")?new Date(this.createdAt.getTime()+1e3*Number(this.token.expires_in)):null}toString(){return JSON.stringify(this.token)}}return l})(),p=(()=>{class l extends O{static{this.NAME="nb:auth:oauth2:jwt:token"}parsePayload(){super.parsePayload(),this.parseAccessTokenPayload()}parseAccessTokenPayload(){const t=this.getValue();if(!t)throw new h("access_token key not found.");this.accessTokenPayload=n(t)}getAccessTokenPayload(){return this.accessTokenPayload}prepareCreatedAt(t){const o=this.accessTokenPayload;return o&&o.iat?new Date(1e3*Number(o.iat)):super.prepareCreatedAt(t)}isValid(){return this.accessTokenPayload&&super.isValid()}getTokenExpDate(){if(this.accessTokenPayload&&this.accessTokenPayload.hasOwnProperty("exp")){const t=new Date(0);return t.setUTCSeconds(this.accessTokenPayload.exp),t}return super.getTokenExpDate()}}return l})()},72863:(A,k,e)=>{e.d(k,{K:()=>u});class u{}},5884:(A,k,e)=>{e.d(k,{m:()=>g});var u=e(21626),d=e(60061),h=e(61106);class g{setOptions(f){this.options=(0,d.zw)({},this.defaultOptions,f)}getOption(f){return(0,d.mf)(this.options,f,null)}createToken(f,T){const n=(0,h.SU)(this.getOption("token.class"),f,this.getName());if(T&&!n.isValid())throw new h.wO("Token is empty or invalid.");return n}getName(){return this.getOption("name")}createFailResponse(f){return new u.cS({body:{},status:401})}createSuccessResponse(f){return new u.cS({body:{},status:200})}getActionEndpoint(f){const T=this.getOption(`${f}.endpoint`),n=this.getOption("baseEndpoint");return T?n+T:""}getHeaders(){const f=this.getOption("headers")??{};if(f instanceof u.Lr)return f;let T=new u.Lr;return Object.entries(f).forEach(([n,c])=>{T=T.append(n,c)}),T}}},18731:(A,k,e)=>{e.d(k,{W:()=>r});var u=e(7673),d=e(41655),h=e(5884),g=e(93609),_=e(72863),f=e(61106);const n=new class T extends _.K{constructor(){super(...arguments),this.token={class:f.ON},this.delay=1e3,this.alwaysFail=!1}};var c=e(54438);let r=(()=>{class a extends h.m{constructor(){super(...arguments),this.defaultOptions=n}static setup(p){return[a,p]}authenticate(p){return(0,u.of)(this.createDummyResult(p)).pipe((0,d.c)(this.getOption("delay")))}register(p){return(0,u.of)(this.createDummyResult(p)).pipe((0,d.c)(this.getOption("delay")))}requestPassword(p){return(0,u.of)(this.createDummyResult(p)).pipe((0,d.c)(this.getOption("delay")))}resetPassword(p){return(0,u.of)(this.createDummyResult(p)).pipe((0,d.c)(this.getOption("delay")))}logout(p){return(0,u.of)(this.createDummyResult(p)).pipe((0,d.c)(this.getOption("delay")))}refreshToken(p){return(0,u.of)(this.createDummyResult(p)).pipe((0,d.c)(this.getOption("delay")))}createDummyResult(p){if(this.getOption("alwaysFail"))return new g.q(!1,this.createFailResponse(p),null,["Something went wrong."]);try{const l=this.createToken("test token",!0);return new g.q(!0,this.createSuccessResponse(p),"/",[],["Successfully logged in."],l)}catch(l){return new g.q(!1,this.createFailResponse(p),null,[l.message])}}static{this.\u0275fac=(()=>{let p;return function(m){return(p||(p=c.xGo(a)))(m||a)}})()}static{this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac})}}return a})()},89169:(A,k,e)=>{e.d(k,{Un:()=>T,cN:()=>g,cS:()=>_,fr:()=>h});var u=e(61106),d=e(72863),h=function(n){return n.CODE="code",n.TOKEN="token",n}(h||{}),g=function(n){return n.AUTHORIZATION_CODE="authorization_code",n.PASSWORD="password",n.REFRESH_TOKEN="refresh_token",n}(g||{}),_=function(n){return n.NONE="none",n.BASIC="basic",n.REQUEST_BODY="request-body",n}(_||{});const T=new class f extends d.K{constructor(){super(...arguments),this.baseEndpoint="",this.clientId="",this.clientSecret="",this.clientAuthMethod=_.NONE,this.redirect={success:"/",failure:null},this.defaultErrors=["Something went wrong, please try again."],this.defaultMessages=["You have been successfully authenticated."],this.authorize={endpoint:"authorize",responseType:h.CODE,requireValidToken:!0},this.token={endpoint:"token",grantType:g.AUTHORIZATION_CODE,requireValidToken:!0,class:u.HL},this.refresh={endpoint:"token",grantType:g.REFRESH_TOKEN,requireValidToken:!0}}}},19653:(A,k,e)=>{e.d(k,{x:()=>p});var u=e(21626),d=e(7673),h=e(25558),g=e(96354),_=e(99437),f=e(30598),T=e(5884),n=e(61106),c=e(93609),r=e(89169),a=e(54438),O=e(54614);let p=(()=>{class l extends T.m{static setup(t){return[l,t]}get responseType(){return this.getOption("authorize.responseType")}get clientAuthMethod(){return this.getOption("clientAuthMethod")}constructor(t,o,i){super(),this.http=t,this.route=o,this.window=i,this.redirectResultHandlers={[r.fr.CODE]:()=>(0,d.of)(this.route.snapshot.queryParams).pipe((0,h.n)(s=>s.code?this.requestToken(s.code):(0,d.of)(new c.q(!1,s,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[])))),[r.fr.TOKEN]:()=>{const E=this.getOption("authorize.requireValidToken");return(0,d.of)(this.route.snapshot.fragment).pipe((0,g.T)(y=>this.parseHashAsQueryParams(y)),(0,g.T)(y=>y.error?new c.q(!1,y,this.getOption("redirect.failure"),this.getOption("defaultErrors"),[]):new c.q(!0,y,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(y,E))),(0,_.W)(y=>{const D=[];return D.push(y instanceof n.wO?y.message:"Something went wrong."),(0,d.of)(new c.q(!1,y,this.getOption("redirect.failure"),D))}))}},this.redirectResults={[r.fr.CODE]:()=>(0,d.of)(this.route.snapshot.queryParams).pipe((0,g.T)(s=>!(!s||!s.code&&!s.error))),[r.fr.TOKEN]:()=>(0,d.of)(this.route.snapshot.fragment).pipe((0,g.T)(s=>this.parseHashAsQueryParams(s)),(0,g.T)(s=>!(!s||!s.access_token&&!s.error)))},this.defaultOptions=r.Un}authenticate(t){return this.getOption("token.grantType")===r.cN.PASSWORD?this.passwordToken(t.email,t.password):this.isRedirectResult().pipe((0,h.n)(o=>o?this.getAuthorizationResult():(this.authorizeRedirect(),(0,d.of)(new c.q(!0)))))}getAuthorizationResult(){const t=this.redirectResultHandlers[this.responseType];if(t)return t.call(this);throw new Error(`'${this.responseType}' responseType is not supported,\n                      only 'token' and 'code' are supported now`)}refreshToken(t){const o="refresh",i=this.getActionEndpoint(o),s=this.getOption(`${o}.requireValidToken`);return this.http.post(i,this.buildRefreshRequestData(t),{headers:this.getHeaders()}).pipe((0,g.T)(E=>new c.q(!0,E,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createRefreshedToken(E,t,s))),(0,_.W)(E=>this.handleResponseError(E)))}passwordToken(t,o){const i="token",s=this.getActionEndpoint(i),E=this.getOption(`${i}.requireValidToken`);return this.http.post(s,this.buildPasswordRequestData(t,o),{headers:this.getHeaders()}).pipe((0,g.T)(y=>new c.q(!0,y,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(y,E))),(0,_.W)(y=>this.handleResponseError(y)))}authorizeRedirect(){this.window.location.href=this.buildRedirectUrl()}isRedirectResult(){return this.redirectResults[this.responseType].call(this)}requestToken(t){const o="token",i=this.getActionEndpoint(o),s=this.getOption(`${o}.requireValidToken`);return this.http.post(i,this.buildCodeRequestData(t),{headers:this.getHeaders()}).pipe((0,g.T)(E=>new c.q(!0,E,this.getOption("redirect.success"),[],this.getOption("defaultMessages"),this.createToken(E,s))),(0,_.W)(E=>this.handleResponseError(E)))}buildCodeRequestData(t){const o={grant_type:this.getOption("token.grantType"),code:t,redirect_uri:this.getOption("token.redirectUri"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(o)))}buildRefreshRequestData(t){const o={grant_type:this.getOption("refresh.grantType"),refresh_token:t.getRefreshToken(),scope:this.getOption("refresh.scope"),client_id:this.getOption("clientId")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(o)))}buildPasswordRequestData(t,o){const i={grant_type:this.getOption("token.grantType"),username:t,password:o,scope:this.getOption("token.scope")};return this.urlEncodeParameters(this.cleanParams(this.addCredentialsToParams(i)))}buildAuthHeader(){if(this.clientAuthMethod===r.cS.BASIC){if(this.getOption("clientId")&&this.getOption("clientSecret"))return new u.Lr({Authorization:"Basic "+btoa(this.getOption("clientId")+":"+this.getOption("clientSecret"))});throw Error("For basic client authentication method, please provide both clientId & clientSecret.")}}getHeaders(){let t=super.getHeaders();t=t.append("Content-Type","application/x-www-form-urlencoded");const o=this.buildAuthHeader();if(void 0===o)return t;for(const i of o.keys())for(const s of o.getAll(i))t=t.append(i,s);return t}cleanParams(t){return Object.entries(t).forEach(([o,i])=>!i&&delete t[o]),t}addCredentialsToParams(t){if(this.clientAuthMethod===r.cS.REQUEST_BODY){if(this.getOption("clientId")&&this.getOption("clientSecret"))return{...t,client_id:this.getOption("clientId"),client_secret:this.getOption("clientSecret")};throw Error("For request body client authentication method, please provide both clientId & clientSecret.")}return t}handleResponseError(t){let o=[];return t instanceof u.yz?t.error.error_description?o.push(t.error.error_description):o=this.getOption("defaultErrors"):o.push(t instanceof n.wO?t.message:"Something went wrong."),(0,d.of)(new c.q(!1,t,this.getOption("redirect.failure"),o,[]))}buildRedirectUrl(){const t={response_type:this.getOption("authorize.responseType"),client_id:this.getOption("clientId"),redirect_uri:this.getOption("authorize.redirectUri"),scope:this.getOption("authorize.scope"),state:this.getOption("authorize.state"),...this.getOption("authorize.params")};return`${this.getActionEndpoint("authorize")}?${this.urlEncodeParameters(this.cleanParams(t))}`}parseHashAsQueryParams(t){return t?t.split("&").reduce((o,i)=>{const s=i.split("=");return o[s[0]]=decodeURIComponent(s[1]),o},{}):{}}urlEncodeParameters(t){return Object.keys(t).map(o=>`${encodeURIComponent(o)}=${encodeURIComponent(t[o])}`).join("&")}createRefreshedToken(t,o,i){const s=this.createToken(t,i);return!s.getRefreshToken()&&o.getRefreshToken()&&s.setRefreshToken(o.getRefreshToken()),s}register(t){throw new Error("`register` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}requestPassword(t){throw new Error("`requestPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}resetPassword(t={}){throw new Error("`resetPassword` is not supported by `NbOAuth2AuthStrategy`, use `authenticate`.")}logout(){return(0,d.of)(new c.q(!0))}static{this.\u0275fac=function(o){return new(o||l)(a.KVO(u.Qq),a.KVO(O.nX),a.KVO(f._5))}}static{this.\u0275prov=a.jDH({token:l,factory:l.\u0275fac})}}return l})()},45254:(A,k,e)=>{e.d(k,{Z:()=>m});var u=e(21626),d=e(7673),h=e(96354),g=e(99437),_=e(25558),f=e(93609),T=e(5884),n=e(61106),c=e(72863),r=e(60061);const O=new class a extends c.K{constructor(){super(...arguments),this.baseEndpoint="/api/auth/",this.login={alwaysFail:!1,endpoint:"login",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Login/Email combination is not correct, please try again."],defaultMessages:["You have been successfully logged in."]},this.register={alwaysFail:!1,endpoint:"register",method:"post",requireValidToken:!0,redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully registered."]},this.requestPass={endpoint:"request-pass",method:"post",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Reset password instructions have been sent to your email."]},this.resetPass={endpoint:"reset-pass",method:"put",redirect:{success:"/",failure:null},resetPasswordTokenKey:"reset_password_token",defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your password has been successfully changed."]},this.logout={alwaysFail:!1,endpoint:"logout",method:"delete",redirect:{success:"/",failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["You have been successfully logged out."]},this.refreshToken={endpoint:"refresh-token",method:"post",requireValidToken:!0,redirect:{success:null,failure:null},defaultErrors:["Something went wrong, please try again."],defaultMessages:["Your token has been successfully refreshed."]},this.token={class:n.ON,key:"data.token",getter:(o,i,s)=>(0,r.mf)(i.body,s.token.key)},this.errors={key:"data.errors",getter:(o,i,s)=>(0,r.mf)(i.error,s.errors.key,s[o].defaultErrors)},this.messages={key:"data.messages",getter:(o,i,s)=>(0,r.mf)(i.body,s.messages.key,s[o].defaultMessages)}}};var p=e(54438),l=e(54614);let m=(()=>{class t extends T.m{static setup(i){return[t,i]}constructor(i,s){super(),this.http=i,this.route=s,this.defaultOptions=O}authenticate(i){const s="login",E=this.getOption(`${s}.method`),y=this.getActionEndpoint(s),D=this.getOption(`${s}.requireValidToken`);return this.http.request(E,y,{body:i,observe:"response",headers:this.getHeaders()}).pipe((0,h.T)(P=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(i);return P}),(0,h.T)(P=>new f.q(!0,P,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,P,this.options),this.createToken(this.getOption("token.getter")(s,P,this.options),D))),(0,g.W)(P=>this.handleResponseError(P,s)))}register(i){const s="register",E=this.getOption(`${s}.method`),y=this.getActionEndpoint(s),D=this.getOption(`${s}.requireValidToken`);return this.http.request(E,y,{body:i,observe:"response",headers:this.getHeaders()}).pipe((0,h.T)(P=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(i);return P}),(0,h.T)(P=>new f.q(!0,P,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,P,this.options),this.createToken(this.getOption("token.getter")("login",P,this.options),D))),(0,g.W)(P=>this.handleResponseError(P,s)))}requestPassword(i){const s="requestPass",E=this.getOption(`${s}.method`),y=this.getActionEndpoint(s);return this.http.request(E,y,{body:i,observe:"response",headers:this.getHeaders()}).pipe((0,h.T)(D=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse();return D}),(0,h.T)(D=>new f.q(!0,D,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,D,this.options))),(0,g.W)(D=>this.handleResponseError(D,s)))}resetPassword(i={}){const s="resetPass",E=this.getOption(`${s}.method`),y=this.getActionEndpoint(s),D=this.getOption(`${s}.resetPasswordTokenKey`);return i[D]=this.route.snapshot.queryParams[D],this.http.request(E,y,{body:i,observe:"response",headers:this.getHeaders()}).pipe((0,h.T)(P=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse();return P}),(0,h.T)(P=>new f.q(!0,P,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,P,this.options))),(0,g.W)(P=>this.handleResponseError(P,s)))}logout(){const i="logout",s=this.getOption(`${i}.method`),E=this.getActionEndpoint(i);return(0,d.of)({}).pipe((0,_.n)(y=>E?this.http.request(s,E,{observe:"response",headers:this.getHeaders()}):(0,d.of)(y)),(0,h.T)(y=>{if(this.getOption(`${i}.alwaysFail`))throw this.createFailResponse();return y}),(0,h.T)(y=>new f.q(!0,y,this.getOption(`${i}.redirect.success`),[],this.getOption("messages.getter")(i,y,this.options))),(0,g.W)(y=>this.handleResponseError(y,i)))}refreshToken(i){const s="refreshToken",E=this.getOption(`${s}.method`),y=this.getActionEndpoint(s),D=this.getOption(`${s}.requireValidToken`);return this.http.request(E,y,{body:i,observe:"response",headers:this.getHeaders()}).pipe((0,h.T)(P=>{if(this.getOption(`${s}.alwaysFail`))throw this.createFailResponse(i);return P}),(0,h.T)(P=>new f.q(!0,P,this.getOption(`${s}.redirect.success`),[],this.getOption("messages.getter")(s,P,this.options),this.createToken(this.getOption("token.getter")(s,P,this.options),D))),(0,g.W)(P=>this.handleResponseError(P,s)))}handleResponseError(i,s){let E=[];return i instanceof u.yz?E=this.getOption("errors.getter")(s,i,this.options):E.push(i instanceof n.wO?i.message:"Something went wrong."),(0,d.of)(new f.q(!1,i,this.getOption(`${s}.redirect.failure`),E))}static{this.\u0275fac=function(s){return new(s||t)(p.KVO(u.Qq),p.KVO(l.nX))}}static{this.\u0275prov=p.jDH({token:t,factory:t.\u0275fac})}}return t})()},92941:(A,k,e)=>{e.d(k,{d:()=>h});var u=e(93565),d=e(54438);let h=(()=>{class g{static{this.\u0275fac=function(T){return new(T||g)}}static{this.\u0275mod=d.$C({type:g})}static{this.\u0275inj=d.G2t({imports:[u.c]})}}return g})()}}]);